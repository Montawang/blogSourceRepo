---
title: '[æµ…æµ…æµ…è°ˆ] æ¨¡æ‹Ÿé€€ç«'
mathjax: true
copyright: true
comment: true
date: 2018-11-10 15:46:42
tags:
    - ç„å­¦
categories: ç®—æ³•
photo: /2018/11/10/æµ…æµ…æµ…è°ˆ-æ¨¡æ‹Ÿé€€ç«/photo.svg
---

{% note default %}

å—¯ï¼ŒDay1 å…ˆ GG äº†ï¼Œå‰ä¸¤é¢˜æš´åŠ›ï¼Œæœ€åä¸€é¢˜éª—åˆ†æµæ°“æ‰“æ³•ï¼Œæ˜å¤©è‚¯å®šæ›´åŠ æ¶å¿ƒï¼Œä»Šå¤©å…ˆæ¥æ€»ç»“ä¸€ä¸ªç„å­¦ç®—æ³•â€”â€”æ¨¡æ‹Ÿé€€ç«

{% endnote %}

<!-- more -->

### æ¨¡æ‹Ÿé€€ç«ç®€ä»‹

ä¸å¤šè¯´ï¼Œå°±ä¸€ä¸ªçƒ­åŠ›å­¦å…¬å¼ï¼š

$$
\operatorname{P}(dE) = \exp(\frac{dE}{kT})
$$

å…¶ä¸­ $k$ æ˜¯ä¸€ä¸ªå¸¸æ•°ï¼Œ$\exp$ è¡¨ç¤ºè‡ªç„¶æŒ‡æ•°ï¼Œä¸” $dE<0$ã€‚è¿™æ¡å…¬å¼è¯´ç™½äº†å°±æ˜¯ï¼šæ¸©åº¦è¶Šé«˜ï¼Œå‡ºç°ä¸€æ¬¡èƒ½é‡å·®ä¸º $dE$ çš„é™æ¸©çš„æ¦‚ç‡å°±è¶Šå¤§ï¼›æ¸©åº¦è¶Šä½ï¼Œåˆ™å‡ºç°é™æ¸©çš„æ¦‚ç‡å°±è¶Šå°ã€‚åˆç”±äº $dE$ æ€»æ˜¯å°äº $0$ï¼ˆå¦åˆ™å°±ä¸å«é€€ç«äº†ï¼‰ï¼Œå› æ­¤ $\frac{dE}{kT} < 0$ ï¼Œæ‰€ä»¥ $\operatorname{P}(dE)$ çš„å‡½æ•°å–å€¼èŒƒå›´æ˜¯ $(0,1)$ ã€‚
éšç€æ¸©åº¦ $T$ çš„é™ä½ï¼Œ$\operatorname{P}(dE)$ä¼šé€æ¸é™ä½ã€‚
æˆ‘ä»¬å°†ä¸€æ¬¡å‘è¾ƒå·®è§£çš„ç§»åŠ¨çœ‹åšä¸€æ¬¡æ¸©åº¦è·³å˜è¿‡ç¨‹ï¼Œæˆ‘ä»¬ä»¥æ¦‚ç‡ $\operatorname{P}(dE)$ æ¥æ¥å—è¿™æ ·çš„ç§»åŠ¨ã€‚

æ‰€ä»¥æ¨¡æ‹Ÿé€€ç«ä¸­å¯¹ç­”æ¡ˆçš„æ›´æ–°å°±æ˜¯ï¼š
1. å¦‚æœæ–°è§£æ›´ä¼˜ï¼Œæ¥å—
2. å¦åˆ™ä»¥ä¸€å®šæ¦‚ç‡æ¥å—

é‚£ä¹ˆï¼Œ é€€ç«å‘¢ï¼Ÿï¼Ÿ

å°±æ˜¯è¿™ä¸ªå¸¸æ•° $k$ äº†ï¼Œå®ƒæ˜¯ä»‹äº $(0, 1)$ é—´çš„ä¸€ä¸ªå¸¸æ•°ï¼Œç”¨æ¥æ§åˆ¶æ¸©åº¦çš„å˜åŒ–ï¼Œå½“æ¸©åº¦å°äºä¸€ä¸ªæå°å€¼ $\epsilon$ æ—¶æˆ‘ä»¬å°±å¯ä»¥åœæ­¢é€€ç«äº†ã€‚

### åšé¢˜

#### [æ´›è°·P1337 [JSOI2004] å¹³è¡¡ç‚¹ / åŠæ‰“XXX](https://www.luogu.org/problemnew/show/P1337)

è¿™é“é¢˜æ˜¯å¯ä»¥ç”¨æ­£äº¤åˆ†è§£çš„ï¼Œä½†æ˜¯ä¸ºäº†å­¦ä¹ æ¨¡æ‹Ÿé€€ç«ï¼Œå°±æŠŠå®ƒå½“ä½œä¸€é“æ¨¡æ¿é¢˜å§ï¼Œå…·ä½“å®ç°å°±æ˜¯å’Œä¸Šé¢æ‰€è¯´çš„ä¸€æ ·ï¼Œå°±æ˜¯è¦æ³¨æ„è°ƒå‚ä»¥åŠ SA çš„æ¬¡æ•°ï¼ˆä¸€æ¬¡å¯èƒ½æ‰¾ä¸åˆ°æ­£ç¡®ç­”æ¡ˆï¼‰

```cpp
#include <bits/stdc++.h>
using namespace std;
#define N 10010
struct instance { double x, y, w; };
instance dat[N]; int n;

double potentialEnergy(double x, double y) {
  double sum = 0;
  for (int i = 1; i <= n; ++i) {
    double deltaX = x - dat[i].x;
    double deltaY = y - dat[i].y;
    sum += (sqrt(deltaX * deltaX + deltaY * deltaY)) * dat[i].w;
  }
  return sum;
}

const double delta = 0.817;
double x, y, ans = 1e18 + 7, t;
inline void simulateAnneal() {
  double xx = x, yy = y;
  t = 1926;
  while (t > 1e-14) {
    double xtmp = x + (rand() * 2 - RAND_MAX) * t;
    double ytmp = y + (rand() * 2 - RAND_MAX) * t;
    double newAns = potentialEnergy(xtmp, ytmp);
    double dE = newAns - ans;
    if (dE < 0) {
      xx = xtmp;
      yy = ytmp;
      x = xx;
      y = yy;
      ans = newAns;
    } else if (exp(-dE / t) * RAND_MAX > rand()) {
      xx = xtmp;
      yy = ytmp;
    }
    t *= delta;
  }
}

inline void solve() {
  for (int i = 1; i <= rand() % 300; ++i) simulateAnneal();
}

int main() {
  ios::sync_with_stdio(false);
  cin.tie(NULL);
  cin >> n;
  srand((unsigned)time(NULL));
  for (int i = 1; i <= n; ++i)
    cin >> dat[i].x >> dat[i].y >> dat[i].w;
  solve();
  cout << fixed << setprecision(3) << x << " " << y << endl;
  return 0;
}
```

### æ€»ç»“

æ¨¡æ‹Ÿé€€ç«å…¶å®æ˜¯çœŸçš„ç„å­¦ï¼Œå¤§å®¶å¯ä»¥æŠŠå®ƒå½“ä½œæ­£ç¡®ç‡æ¯”è¾ƒé«˜çš„çŒ´å­ç®—æ³•ï¼Œæœ‰æ—¶å€™å¯èƒ½ä¼šä¸å¦‚ä¸€èˆ¬çš„ `random_shufle` åŠ ä¸€ä¸ªå¡æ—¶ã€‚è¿™é‡Œé¡ºä¾¿è¯´ä¸€ä¸‹ï¼Œæ¨¡æ‹Ÿé€€ç«åªæ˜¯ä¸€ä¸ª OI ç•Œæ¯”è¾ƒæœ‰åçš„éšæœºç®—æ³•ï¼Œéšæœºç®—æ³•è¿˜æœ‰å¾ˆå¤šï¼Œæ¯”å¦‚é—ä¼ ç®—æ³•ä¹‹ç±»çš„ï¼Œè¿™äº›ä¸œè¥¿ä¹ŸçœŸçš„æ˜¯ç„å­¦å¾—ä¸€æ¯”ï¼Œå¦‚æœä¸æ˜¯åƒæˆ‘è¿™æ ·é—²çš„è›‹ç–¼å°±åˆ«å»å­¦ä¹ äº†ğŸ˜‚ğŸ˜‚

---

<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<ins class="adsbygoogle"
â€‹     style="display:block; text-align:center;"
â€‹     data-ad-layout="in-article"
â€‹     data-ad-format="fluid"
â€‹     data-ad-client="ca-pub-7465666912424994"
â€‹     data-ad-slot="3198608984"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<br/>